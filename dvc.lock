schema: '2.0'
stages:
  clean:
    cmd: python hrr_analysis/01_cleaning.py
    deps:
    - path: apple_health_export/export.xml
      hash: md5
      md5: 5b8cd4317a29322dd2b755de7fefa033
      size: 648003184
    - path: hrr_analysis/01_cleaning.py
      hash: md5
      md5: e398b0b72b79a25e36b3ca7948d6b863
      size: 6660
    - path: params.yaml
      hash: md5
      md5: 2affea7160b29edee413119bf87933d0
      size: 707
    outs:
    - path: converted/
      hash: md5
      md5: 26a4d701237fc525c2e2730b51af6e7b.dir
      size: 5852270
      nfiles: 2
  features:
    cmd: python hrr_analysis/02_features.py
    deps:
    - path: converted/
      hash: md5
      md5: d751713988987e9331980363e24189ce.dir
      size: 0
      nfiles: 0
    - path: hrr_analysis/02_features.py
      hash: md5
      md5: 8946e45b9c27d7c8da6c2b1434b5bb7a
      size: 10596
    - path: params.yaml
      hash: md5
      md5: 2affea7160b29edee413119bf87933d0
      size: 707
    outs:
    - path: features/
      hash: md5
      md5: 2382fd64c6bcd5db1c4a361c5f878e35.dir
      size: 0
      nfiles: 2
  train:
    cmd: python hrr_analysis/04_models.py
    deps:
    - path: features/features_ml.parquet
      hash: md5
      md5: 46c1928414d0e47f54f0bfd731ad7626
      size: 24360
    - path: hrr_analysis/04_models.py
      hash: md5
      md5: e20fcc38d80c85ece564b576f806386f
      size: 18076
    - path: params.yaml
      hash: md5
      md5: e1c41ac4c028be66aa53a7f4817c061b
      size: 2435
    params:
      params.yaml:
        models:
          xgb:
            n_estimators: 600
            max_depth: 4
            learning_rate: 0.05
            subsample: 0.9
            colsample_bytree: 0.9
            reg_lambda: 1.0
            reg_alpha: 0.0
            n_jobs: -1
            tree_method: hist
          rf:
            n_estimators: 600
            max_depth:
            min_samples_leaf: 2
            n_jobs: -1
          ridge:
            alpha: 1.0
        training:
          random_seed: 42
          split_ratio: 0.7
          quality_gate_threshold: 0.05
    outs:
    - path: models/
      hash: md5
      md5: abc438edb1321998361d5b0426e91461.dir
      size: 4307101
      nfiles: 11
  explain:
    cmd: python hrr_analysis/05_explainability.py
    deps:
    - path: features/features_ml.parquet
      hash: md5
      md5: 46c1928414d0e47f54f0bfd731ad7626
      size: 24360
    - path: hrr_analysis/05_explainability.py
      hash: md5
      md5: 50d67c5a3b89cd47612c437a42c6086c
      size: 10958
    - path: models/
      hash: md5
      md5: abc438edb1321998361d5b0426e91461.dir
      size: 4307101
      nfiles: 11
    outs:
    - path: explainability/
      hash: md5
      md5: 40ec2d301c3f6862f8aa659a8190a736.dir
      size: 566681
      nfiles: 10
  predict:
    cmd: python hrr_analysis/06_predict.py --fast
    deps:
    - path: features/features_ml.parquet
      hash: md5
      md5: 46c1928414d0e47f54f0bfd731ad7626
      size: 24360
    - path: hrr_analysis/06_predict.py
      hash: md5
      md5: 8190695eaafb4de31f241e2a0c59525c
      size: 12367
    - path: models/
      hash: md5
      md5: abc438edb1321998361d5b0426e91461.dir
      size: 4307101
      nfiles: 11
    outs:
    - path: predictions/
      hash: md5
      md5: 6d293f81d8d9d5e68ed9cd3561fe462f.dir
      size: 36296
      nfiles: 6
  visualize:
    cmd: python hrr_analysis/07_visualize.py
    deps:
    - path: hrr_analysis/07_visualize.py
      hash: md5
      md5: 2236971e9a69ee1cdcc7877d0161eb68
      size: 19684
    - path: models/
      hash: md5
      md5: abc438edb1321998361d5b0426e91461.dir
      size: 4307101
      nfiles: 11
    - path: predictions/
      hash: md5
      md5: 6d293f81d8d9d5e68ed9cd3561fe462f.dir
      size: 36296
      nfiles: 6
    outs:
    - path: report/figures/
      hash: md5
      md5: 0dc432daabb3c011fdbc49cbce4ef0b0.dir
      size: 1297371
      nfiles: 9
  report:
    cmd: python hrr_analysis/08_report.py
    deps:
    - path: hrr_analysis/08_report.py
      hash: md5
      md5: b18fc5d2a5df0e6eee58762c4b8ef6f1
      size: 15908
    - path: models/
      hash: md5
      md5: abc438edb1321998361d5b0426e91461.dir
      size: 4307101
      nfiles: 11
    - path: report/figures/
      hash: md5
      md5: 0dc432daabb3c011fdbc49cbce4ef0b0.dir
      size: 1297371
      nfiles: 9
    outs:
    - path: report/final_report.md
      hash: md5
      md5: 570ce857563b7f1eb2c69ddfd9df20b6
      size: 5628
